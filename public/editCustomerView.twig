<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Car rental - Edit customer</title>
</head>

<body>
    <header>
        <form method="post" action="/customers">
            <input type="submit" value="Customers">
        </form>
        <form method="post" action="/cars">
            <input type="submit" value="Cars">
        </form>
                <form method="post" action="/checkIn">
            <input type="submit" value="Check in">
        </form>
        <form method="post" action="/checkOut">
            <input type="submit" value="Check out">
        </form>
                <form method="post" action="/history">
            <input type="submit" value="History">
        </form>
        <form method="post" action="/">
            <input type="submit" value="Home">
        </form>
    </header>
    
    <main>
        <h1>Edit customer</h1>
        <form method="POST" action="/customerEdited{{selectedCustomer.person_number}}" name="form" onsubmit="return validateForm();">
            <input type="text" name="personnumber" value="{{selectedCustomer.person_number}}" disabled><br>
            <input type="text" name="name" value="{{selectedCustomer.name}}"><br>
            <input type="text" name="address" value="{{selectedCustomer.adress}}"><br>
            <input type="text" name="postalcode" value="{{selectedCustomer.postal_code}}"><br>
            <input type="text" name="phone" value="{{selectedCustomer.phone}}"><br>
            <button type="submit" name="submit">Save changes</button>
        </form>
        <form method="post" action="/customers">
            <input type="submit" value="Discard changes">
        </form>
    </main>
      
<script> 
        function validateForm() {
            let name = document.forms["form"]["name"].value;
            if (name == "") {
                alert("You cannot leave your name field empty");
                return false;
            }
            let address = document.forms["form"]["address"].value;
            if (address == "") {
                alert("You cannot leave your address field empty");
                return false;
            }
            let postalcode = document.forms["form"]["postalcode"].value;
            if (postalcode == "") {
                alert("You cannot leave your postal code field empty");
                return false;
            }
            let phone = document.forms["form"]["phone"].value;
            if (isNaN(phone)) {
                alert("You can only insert numbers in your phone field");
                return false;
            } else if (phone == "") {
                alert("You cannot leave your phone field empty");
                return false;
            } else {
                if (!phone.startsWith("0")) {
                    alert("The phone you inserted seems wrong");
                    return false;
                }
            }
        }
</script>